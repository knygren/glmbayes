%Usage: R CMD Sweave template3.Rnw = Sweave template3
%       rubber -d template3 or pdflatex template3
% To get .R file: R CMD Stangle template3.Rnw = Stangle template3
\documentclass{article}
\usepackage{relsize,setspace}  % used by latex(describe( ))
\usepackage{needspace}
\usepackage{url}               % used in bibliography
\usepackage[superscript,nomove]{cite} % use if \cite is used and superscripts wanted
% Remove nomove if you want superscripts after punctuation in citations
\usepackage{lscape}            % for landscape mode tables
\textwidth 6.75in              % set dimensions before fancyhdr 
\textheight 9.25in
\topmargin -.875in
\oddsidemargin -.125in
\evensidemargin -.125in
\usepackage{fancyhdr}          % this and next line are for fancy headers/footers
\pagestyle{fancy}
\newcommand{\bc}{\begin{center}}  % abbreviate
\newcommand{\ec}{\end{center}}
\newcommand{\code}[1]{{\smaller\texttt{#1}}}
\newcommand{\R}{{\normalfont\textsf{R}}{}}

\usepackage{Sweavel}
% Uncomment some of the following to use some alternatives:
% \def\Sweavesize{\normalsize}  (changes size of typeset R code and output)
% \def\Rcolor{\color{black}}
% \def\Routcolor{\color{green}}
% \def\Rcommentcolor{\color{red}}
% To change background color or R code and/or output, use e.g.:
% \def\Rbackground{\color{white}}
% \def\Routbackground{\color{white}}
% To use rgb specifications use \color[rgb]{ , , }
% To use gray scale use e.g. \color[gray]{0.5}
% If you change any of these after the first chunk is produced, the
% changes will have effect only for the next chunk.

\SweaveOpts{keep.source=TRUE}
% To produce both postscript and pdf graphics, remove the eps and pdf
% parameters in the next line.  Set default plot size to 6x4 in.
\SweaveOpts{prefix.string=graphics/plot, eps = FALSE, pdf = TRUE}
\SweaveOpts{width=5, height=3.5}

\title{An Analysis}
\author{Jane Doe\\\smaller Department of Biostatistics\\\smaller Vanderbilt University School of Medicine}
\begin{document}
\maketitle
% Use the following 3 lines for long reports needing navigation
\tableofcontents
%\listoftables
%\listoffigures     % not used unless figure environments used
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{spar} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{mar}\hlstd{=}\hlkwd{c}\hlstd{(}\hlnum{3.25}\hlopt{+}\hlstd{bot}\hlopt{-}\hlnum{.45}\hlopt{*}\hlstd{multi,}\hlnum{3.5}\hlopt{+}\hlstd{left,}\hlnum{.5}\hlopt{+}\hlstd{top}\hlopt{+}\hlnum{.25}\hlopt{*}\hlstd{multi,}\hlnum{.5}\hlopt{+}\hlstd{rt),}
                 \hlkwc{lwd} \hlstd{=} \hlkwa{if}\hlstd{(multi)}\hlnum{1} \hlkwa{else} \hlnum{1.75}\hlstd{,}
                 \hlkwc{mgp} \hlstd{=} \hlkwa{if}\hlstd{(multi)} \hlkwd{c}\hlstd{(}\hlnum{1.5}\hlstd{,} \hlnum{.365}\hlstd{,} \hlnum{0}\hlstd{)} \hlkwa{else} \hlkwd{c}\hlstd{(}\hlnum{2.4}\hlopt{-}\hlnum{.4}\hlstd{,} \hlnum{0.475}\hlstd{,} \hlnum{0}\hlstd{),}
                 \hlkwc{tcl} \hlstd{=} \hlkwa{if}\hlstd{(multi)}\hlopt{-}\hlnum{0.25} \hlkwa{else} \hlopt{-}\hlnum{0.4}\hlstd{,}
                 \hlkwc{bot}\hlstd{=}\hlnum{0}\hlstd{,} \hlkwc{left}\hlstd{=}\hlnum{0}\hlstd{,} \hlkwc{top}\hlstd{=}\hlnum{0}\hlstd{,} \hlkwc{rt}\hlstd{=}\hlnum{0}\hlstd{,} \hlkwc{ps}\hlstd{=}\hlnum{14}\hlstd{,}
                 \hlkwc{mfrow}\hlstd{=}\hlkwa{NULL}\hlstd{,} \hlkwc{...}\hlstd{)}
  \hlstd{\{}
    \hlstd{multi} \hlkwb{<-} \hlkwd{length}\hlstd{(mfrow)} \hlopt{>} \hlnum{0}
    \hlkwd{par}\hlstd{(}\hlkwc{mar}\hlstd{=mar,} \hlkwc{lwd}\hlstd{=lwd,} \hlkwc{mgp}\hlstd{=mgp,} \hlkwc{tcl}\hlstd{=tcl, ...)}
    \hlkwa{if}\hlstd{(multi)} \hlkwd{par}\hlstd{(}\hlkwc{mfrow}\hlstd{=mfrow)}
  \hlstd{\}}
\hlkwd{options}\hlstd{(}\hlkwc{SweaveHooks}\hlstd{=}\hlkwd{list}\hlstd{(}\hlkwc{fig}\hlstd{=spar))} \hlcom{# run spar() before every plot}
\hlkwd{options}\hlstd{(}\hlkwc{prompt}\hlstd{=}\hlstr{'  '}\hlstd{,}\hlkwc{continue}\hlstd{=}\hlstr{'  '}\hlstd{)}  \hlcom{# remove prompt characters at start of lines}
\hlkwd{require}\hlstd{(rms)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required package: rms}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning in library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE, : there is no package called 'rms'}}\end{kframe}
\end{knitrout}

\section{Descriptive Statistics}\label{descStats}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{getHdata}\hlstd{(support)}   \hlcom{# Use Hmisc/getHdata to get dataset from VU DataSets wiki}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in getHdata(support): could not find function "{}getHdata"{}}}\begin{alltt}
\hlstd{d} \hlkwb{<-} \hlkwd{subset}\hlstd{(support,} \hlkwc{select}\hlstd{=}\hlkwd{c}\hlstd{(age,sex,race,edu,income,hospdead,slos,dzgroup,}
                       \hlstd{meanbp,hrt))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in subset(support, select = c(age, sex, race, edu, income, hospdead, : object 'support' not found}}\begin{alltt}
\hlkwd{latex}\hlstd{(}\hlkwd{describe}\hlstd{(d),} \hlkwc{file}\hlstd{=}\hlstr{''}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in latex(describe(d), file = "{}"{}): could not find function "{}latex"{}}}\end{kframe}
\end{knitrout}
Race is reduced to three levels (white, black, OTHER) because of low
frequencies in other levels (minimum relative frequency set to 0.05).
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{d} \hlkwb{<-} \hlkwd{upData}\hlstd{(d,}
            \hlkwc{race} \hlstd{=} \hlkwd{combine.levels}\hlstd{(race,} \hlkwc{minlev} \hlstd{=} \hlnum{0.05}\hlstd{))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in upData(d, race = combine.levels(race, minlev = 0.05)): could not find function "{}upData"{}}}\end{kframe}
\end{knitrout}

\section{Redundancy Analysis and Variable Interrelationships}
\bc
% Note: giving a chunk name to each code chunk that produces a figure
% makes it easy to know which plots to send to a collaborator, and
% will not allow numbered orphan plots to be left when code chunks are
% inserted into the file.  The default in Sweave is for plots to be
% numbered by the chunks producing them.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{v} \hlkwb{<-} \hlkwd{varclus}\hlstd{(}\hlopt{~}\hlstd{.,} \hlkwc{data}\hlstd{=d)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in varclus(\textasciitilde{}., data = d): could not find function "{}varclus"{}}}\begin{alltt}
\hlkwd{plot}\hlstd{(v)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in plot(v): object 'v' not found}}\begin{alltt}
\hlkwd{redun}\hlstd{(}\hlopt{~}\hlstd{age}\hlopt{+}\hlstd{sex}\hlopt{+}\hlstd{race}\hlopt{+}\hlstd{edu}\hlopt{+}\hlstd{income}\hlopt{+}\hlstd{dzgroup}\hlopt{+}\hlstd{meanbp}\hlopt{+}\hlstd{hrt,} \hlkwc{data}\hlstd{=d)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in redun(\textasciitilde{}age + sex + race + edu + income + dzgroup + meanbp + hrt, : could not find function "{}redun"{}}}\begin{alltt}
\hlcom{# Alternative: redun(~., data=subset(d, select=-c(hospdead,slos)))}
\end{alltt}
\end{kframe}
\end{knitrout}
\ec
Note that the clustering of black with white is not interesting; this just means that these are mutually exclusive higher frequency categories, causing them to be negatively correlated.
\section{Logistic Regression Model}
Here we fit a tentative binary logistic regression model.  The
coefficients are not very useful so they are not
printed.  Note: the symbolic section reference below was created by the
following \R\ comment:
\begin{verbatim}
# see Section (*\ref{descStats}*) for descriptive statistics
\end{verbatim}
The label was defined in an earlier section using
\begin{verbatim}
\section{Descriptive Statistics}\label{descStats}
\end{verbatim}







