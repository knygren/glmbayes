% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Prior_Setup.R
\name{Prior_Setup}
\alias{Prior_Setup}
\title{Setup Prior Objects}
\usage{
Prior_Setup(
  formula,
  data,
  subset = NULL,
  na.action = na.fail,
  drop.unused.levels = FALSE,
  xlev = NULL,
  ...
)
}
\arguments{
\item{formula}{a model \code{\link[stats]{formula}} or \code{\link[stats]{terms}}
    object or an \R object.}

\item{data}{a data.frame, list or environment (or object
    coercible by \code{\link{as.data.frame}} to a data.frame),
    containing the variables in \code{formula}.  Neither a matrix nor an
    array will be accepted.}

\item{subset}{a specification of the rows to be used: defaults to all
    rows. This can be any valid indexing vector (see
    \code{\link{[.data.frame}}) for the rows of \code{data} or if that is not
    supplied, a data frame made up of the variables used in \code{formula}.}

\item{na.action}{how \code{NAs} are treated. The default is first, any \code{\link{na.action}} attribute of 
data, second a \code{na.action} setting of \link{options}, and third \code{na.fail} if that is unset. 
The \code{factory-fresh} default is \code{na.omit}. Another possible value is \code{NULL}.}

\item{drop.unused.levels}{should factors have unused levels dropped?
    Defaults to \code{FALSE}.}

\item{xlev}{a named list of character vectors giving the full set of levels
    to be assumed for each factor.}

\item{...}{for \code{model.frame} methods, a mix of further
    arguments such as \code{data}, \code{na.action}, \code{subset} to pass
    to the default method.  Any additional arguments (such as
    \code{offset} and \code{weights} or other named arguments) which
    reach the default method are used to create further columns in the
    model frame, with parenthesised names such as \code{"(offset)"}.

    For \code{get_all_vars}, further named columns to include
    in the model frame.}
}
\value{
A list with items related to the prior.
\item{mu}{An initial version of the prior mean vector, populated with all zeros}
\item{Sigma}{An initial version of the prior Variance-Covariance vector, populated as the diagonal identity matrix}
\item{model}{The model frame from \code{object} if it exists}
\item{x}{The design matrix from \code{object} if it exists}
}
\description{
Sets up the structure for the Prior mean and Variance Matrices using information from a classical model.
}
\examples{
## Dobson (1990) Page 93: Randomized Controlled Trial :
counts <- c(18,17,15,20,10,20,25,13,12)
outcome <- gl(3,1,9)
treatment <- gl(3,3)
print(d.AD <- data.frame(treatment, outcome, counts))


glm.D93 <- glm(counts ~ outcome + treatment, family = poisson(),x=TRUE)

summary(glm.D93)

n<-1000
mu<-matrix(0,5)
X<-glm.D93$x
Xmu=glm.D93$x\%*\%glm.D93$coefficients
explambda=diag(as.vector(exp(Xmu)))

# Use approximately conjugate prior for mu with 10\% weight on prior

wt_0<-0.1
m_0=exp(log(wt_0/(1-wt_0)))
V0<-solve(m_0*t(X)\%*\%explambda\%*\%X)

diag(sqrt(diag(V0)))
V0
sqrt(diag(V0))


Like_std=summary(glm.D93)$coefficients[,2]
D93_Prior_Error_Checks=Prior_Check(glm.D93,mu,V0)

D93_Prior_Error_Checks


mu[1,1]=0+4*sqrt(diag(V0)[1])
mu[1,1]=0+15*Like_std[1]
mu[1,1]=log(mean(counts))
mu

D93_Prior_Error_Checks=Prior_Check(glm.D93,mu,V0)

#glmb.D93<-glmb(n=n,counts ~ outcome + treatment, family = poisson(),mu=mu,Sigma=V0,Gridtype=3)
#summary(glmb.D93)
}
